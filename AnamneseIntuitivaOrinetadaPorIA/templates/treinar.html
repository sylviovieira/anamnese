<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste do Algoritmo RandomTreeClassifier</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light d-flex flex-column justify-content-center align-items-center vh-100">
    
    <h1 class="text-center mb-4">Teste do Algoritmo RandomTreeClassifier</h1>
    
    <button id="btnTreinar" class="btn btn-primary mb-3">Treinar</button>

    <textarea id="resultado" class="form-control" rows="10" style="width: 600px;" readonly></textarea>

    <script>
        document.getElementById("btnTreinar").addEventListener("click", async () => {
            document.getElementById("resultado").value = "Treinando modelo, aguarde...";

            try {
                let response = await fetch("/treinar_modelo/", {
                    method: "POST",
                    headers: {
                        "X-CSRFToken": getCookie("csrftoken")
                    }
                });

                let data = await response.json();
                document.getElementById("resultado").value = data.resultado;
            } catch (err) {
                document.getElementById("resultado").value = "Erro ao treinar modelo!";
            }
        });

        // Função para pegar CSRF token
        function getCookie(name) {
            let cookieValue = null;
            if (document.cookie && document.cookie !== "") {
                let cookies = document.cookie.split(";");
                for (let i = 0; i < cookies.length; i++) {
                    let cookie = cookies[i].trim();
                    if (cookie.substring(0, name.length + 1) === (name + "=")) {
                        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                        break;
                    }
                }
            }
            return cookieValue;
        }
    </script>
</body>
</html>
